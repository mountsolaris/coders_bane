<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        .video-background {
            position: relative;
            overflow: hidden;
        }

        .video-background video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            transform: translate(-50%, -50%);
            z-index: -1;
        }

        .content {
            position: relative;
            z-index: 1;
            color: white;
            text-align: center;
            padding: 100px 20px;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Login</title>
</head>
<body>

<div class="container-fluid video-background opacity-75 min-vh-100">
    <video autoplay muted loop>
        <source src="videos/background-typing.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div class="row">
        <div class="col content">
            <h1>ðŸ”¥ LOGIN! ðŸ”¥</h1>
            <h2 style="color:#ffc720" ;>&lt;/&gt;</h2>
            <h3>We know many login. We have the best login!</h3>
            </br>
            </br>
            <div class="container mt-4">
                <div class="row justify-content-center">
                    <div class="col-md-6 d-flex flex-column align-items-center">
                        <form id="loginForm">
                            <label for="username">Enter Username</label>
                            <input type="password" id="username" required/>
                            <label for="password">Enter Password</label>
                            <input type="text" id="password" required/>

                            <label for="reasonToEnter">Please specify why you want to login. Select exactly five reasons. Don't cheat.</label>
                            <select id="reasonToEnter" multiple size="2">
                                <option>This doesn't work!</option>
                            </select>
                            <!--    <button type="button" onclick="validateSelection()">Submit</button>-->
                            <p id="output"></p>
                            <label for="loginDate">When do you want to log in?</label>
                            <div id="loginDateGiven"><input type="datetime-local" id="loginDate" required/></div>

                            <label for="logoutDate">When do you want to log out?</label>
                            <input type="datetime-local" id="logoutDate" required/>

                            <p>What do you identify as?</p>
                            <input type="radio" id="robot" name="identify" required>
                            <label for="robot">Robot (beep/beep)</label>
                            <input type="radio" id="human" name="identify" required>
                            <label for="humanoid">Humanoid (he/her)</label>
                            <input type="radio" id="insecure" name="identify" required>
                            <label for="insecure">Something fluid</label>
                            <input type="radio" id="consider" name="identify" required>
                            <label for="consider">I need to reconsider my humanity</label>

                            <input type="text" id="questionBack" size="50" required/>
                            <label for="questionBack">Before we continue, do you have any questions?</label>

                            <p>Now let's make sure that you're a human.</p>
                            <input type="checkbox" id="inhumane" required/>
                            <label for="inhumane">I am a human.</label>

                            <button id="submit">Absenden</button>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <script>

        // ---- FORM BEHAVIOUR ---- //

        const loginForm = document.getElementById('loginForm');
        loginForm.addEventListener('submit', (e) => {
            if (!loginForm.checkValidity()) {
                // Falls ein Feld ungÃ¼ltig ist, verhindere das Absenden
                e.preventDefault();
                e.stopPropagation();
            }

            // FÃ¼ge Bootstrap-Klassen fÃ¼r die Validierung hinzu
            loginForm.classList.add('was-validated');
            const loginDate = document.getElementById('loginDate');
            const user = document.getElementById('username');

            loginForm.innerHTML = 'Hi ' + user.value + '! See you on ' + loginDate.value.slice(0, 10);
        });



        // ---- FETCH OPTIONS ---- //

        // Pfad zur TXT-Datei
        const txtFilePath = 'options.txt';

        // Element, in das der Inhalt eingefÃ¼gt werden soll
        const reasonToEnter = document.getElementById('reasonToEnter');

        // Lade die TXT-Datei
        fetch(txtFilePath)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP-Fehler! Status: ${response.status}`);
                }
                return response.text(); // Inhalt der Datei als Text
            })
            .then(text => {
                // FÃ¼ge den Text in das HTML-Element ein
                reasonToEnter.innerHTML = text;
            })
            .catch(error => {
                console.error('Fehler beim Laden der Datei:', error);
            });


        // ---- MAKE SURE DROPDOWN ELEMENTS TRUE ---- //

        function validateSelection() {
            const select = document.getElementById("reasonToEnter");
            const selectedOptions = Array.from(select.selectedOptions); // Get all selected options
            const numberOfSelected = selectedOptions.length;

            if (numberOfSelected === 5) {
                // document.getElementById("output").textContent = 'Thank you.'
                return true;
            } else if (numberOfSelected < 5) {
                document.getElementById("output").textContent =
                    `You need to select exactly five options. You selected only ${numberOfSelected}.`;
                return false;
            } else {
                document.getElementById("output").textContent =
                    `Too many selections! You chose ${numberOfSelected}, but only five are allowed.`;
                return false;
            }
        }

        // ---- FUNCTION FOR QUESTION BACK ---- //

        const questionBack = document.getElementById('questionBack');
        const targetQuestion = 'Does this horrorshow ever end?!!'
        let stringIndex = 0;
        questionBack.addEventListener('keydown', (e) => {
            e.preventDefault();
            if (stringIndex < targetQuestion.length) {
                questionBack.value += targetQuestion[stringIndex];
                stringIndex++;
            }
        });


        // ---- DATE AND TIME ---- //


        const loginDate = document.getElementById('loginDate');
        const logoutDate = document.getElementById('logoutDate');

        const futureLoginTimeMinimum = new Date(Date.now() + 1000 * 3600 * 24);
        const futureLoginTimeMaximum = new Date(futureLoginTimeMinimum.getTime() + 1000 * 3600 * 72);

        const futureLogoutTimeMinimum = new Date(futureLoginTimeMaximum.getTime() + 1000 * 3600);
        const futureLogoutTimeMaximum = new Date(futureLogoutTimeMinimum.getTime() + 1000 * 3600 * 24);

        console.log(futureLoginTimeMinimum + futureLoginTimeMaximum);
        console.log(futureLogoutTimeMinimum + futureLogoutTimeMaximum);

        loginDate.min = futureLoginTimeMinimum.toISOString().slice(0, 16);
        loginDate.max = futureLoginTimeMaximum.toISOString().slice(0, 16);
        logoutDate.min = futureLogoutTimeMinimum.toISOString().slice(0, 16);
        logoutDate.max = futureLogoutTimeMaximum.toISOString().slice(0, 16);


    </script>
</body>
</html>